{"version":3,"sources":["assets/images/logo.jpg","store/actions/index.js","store/actions/video.js","containers/SideBar/SideBarItem/SideBarItem.js","containers/SideBar/SideBarHeader/SideBarHeader.js","containers/SideBar/Subscriptions/Subscription/Subscription.js","containers/SideBar/Subscriptions/Subscriptions.js","containers/SideBar/SideBarFooter/SideBarFooter.js","containers/SideBar/SideBar.js","components/VideoGrid/VideoGridHeader/VideoGridHeader.js","services/number/number-format.js","services/date/date-format.js","components/VideoPreview/VideoPreview.js","components/VideoGrid/VideoGrid.js","store/api/youtube-api-response-types.js","store/actions/watch.js","services/url/index.js","store/reducers/videos.js","components/InfiniteScroll/InfiniteScroll.js","containers/Home/HomeContent/HomeContent.js","store/actions/api.js","store/reducers/api.js","containers/Home/Home.js","containers/HeaderNav/HeaderNav.js","components/ScrollToTop/ScrollToTop.js","components/AppLayout/AppLayout.js","components/Video/Video.js","components/Rating/Rating.js","components/VideoMetadata/VideoMetadata.js","components/VideoInfoBox/VideoInfoBox.js","containers/Comments/CommentsHeader/CommentsHeader.js","containers/Comments/Comment/Comment.js","containers/Comments/AddComment/AddComment.js","containers/Comments/Comments.js","components/RelatedVideos/NextUpVideo/NextUpVideo.js","components/RelatedVideos/RelatedVideos.js","store/reducers/channels.js","store/actions/comment.js","store/reducers/comments.js","containers/Watch/WatchContent/WatchContent.js","containers/Watch/Watch.js","components/VideoList/VideoList.js","containers/Trending/Trending.js","store/actions/search.js","store/reducers/search.js","containers/Search/Search.js","App.js","registerServiceWorker.js","store/reducers/index.js","store/api/youtube-api.js","store/sagas/video.js","store/sagas/watch.js","store/sagas/comment.js","store/sagas/search.js","store/sagas/index.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","REQUEST","SUCCESS","FAILURE","createRequestTypes","base","Error","reduce","acc","type","concat","createAction","payload","arguments","length","undefined","Object","objectSpread","VIDEO_CATEGORIES","categories","request","success","response","failure","MOST_POPULAR","mostPopular","amount","loadDescription","nextPageToken","MOST_POPULAR_BY_CATEGORY","mostPopularByCategory","SideBarItem","_React$Component","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","inherits","createClass","key","value","highlight","shouldBeHighlighted","react_default","a","createElement","react_router_dom","to","pathname","props","path","Menu","Item","className","join","Icon","size","name","icon","label","location","includes","React","Component","withRouter","SideBarHeader","heading","title","toUpperCase","Header","Subscription","rightElement","broadcasting","amountNewVideos","Image","src","avatar","Subscriptions","Fragment","SideBarHeader_SideBarHeader","Subscription_Subscription","Divider","SideBarFooter","href","target","rel","SideBar","borderless","vertical","stackable","fixed","SideBar_SideBarItem_SideBarItem","Subscriptions_Subscriptions","SideBarFooter_SideBarFooter","VideoGridHeader","UNITS","getShortNumberString","number","digits","some","element","index","lowerBound","Math","pow","i","decimal","toFixed","toString","objMap","numbers","datePattern","timePattern","pattern","RegExp","getVideoDurationString","iso8601DurationString","_parseISO8601TimePatt","match","slice","prev","next","idx","parseFloat","days","hours","minutes","seconds","secondsString","minutesString","accumulatedHours","padStart","TimeAgo","locale","en","timeAgo","VideoPreview","video","videoDuration","contentDetails","duration","viewAndTimeString","getFormattedViewAndTime","horizontal","expanded","description","snippet","search","thumbnails","medium","url","channelTitle","publicationDate","Date","publishedAt","statistics","viewCount","viewCountShort","format","VideoGrid","videos","gridItems","map","VideoPreview_VideoPreview_VideoPreview","id","divider","hideDivider","VideoGridHeader_VideoGridHeader","VIDEO_LIST_RESPONSE","CHANNEL_LIST_RESPONSE","SEARCH_LIST_RESPONSE","COMMENT_THREAD_LIST_RESPONSE","WATCH_DETAILS","details","videoId","channelId","VIDEO_DETAILS","videoDetails","getSearchParam","URLSearchParams","get","initialState","byId","byCategory","related","getMostPopular","state","getMostPopularVideos","createSelector","videosById","items","getVideoCategoryIds","keys","getVideosByCategory","videosByCategory","accumulator","categoryId","videoIds","videoCategoriesLoaded","videosByCategoryLoaded","getVideoById","getRelatedVideos","relatedVideoIds","filter","getChannelId","getAmountComments","commentCount","allMostPopularVideosLoaded","totalResults","getMostPopularVideosNextPageToken","InfiniteScroll","children","react_waypoint_es","onEnter","bottomReachedCallback","Loader","active","showLoader","inline","HomeContent","trendingVideos","getTrendingVideos","categoryGrids","getVideoGridsForCategories","InfiniteScroll_InfiniteScroll","VideoGrid_VideoGrid","mostPopularVideos","_this","categoryTitles","categoryTitle","connect","youtubeLibraryLoaded","bind","libraryLoaded","getYoutubeLibraryLoaded","api","Home","call","fetchVideosByCategory","categoryIndex","SideBar_SideBar_SideBar","Home_HomeContent_HomeContent","shouldShowLoader","fetchCategoriesAndMostPopularVideos","prevProps","videoCategories","categoryStartIndex","fetchMostPopularVideosByCategory","setState","prevState","fetchMostPopularVideos","fetchVideoCategories","dispatch","videoActions","bindActionCreators","HeaderNav","onInputChange","event","query","onSubmit","escapedSearchQuery","encodeURI","history","push","header","logo","Form","Field","Input","placeholder","action","onChange","position","ScrollToTop","window","scrollTo","AppLayout","components_ScrollToTop_ScrollToTop","containers_HeaderNav_HeaderNav","BASE_EMBED_URL","Video","embedUrl","frameBorder","allow","allowFullScreen","Rating","rating","likeCount","dislikeCount","amountLikes","amountDislikes","percentagePositiveRatings","Progress","percent","VideoMetadata","Number","toLocaleString","Rating_Rating","Button","basic","labelPosition","VideoInfoBox","onToggleCollapseButtonClick","collapsed","channel","iso8601DateString","descriptionParagraphs","getDescriptionParagraphs","_this$getConfig","getConfig","descriptionTextClass","buttonTitle","publishedAtString","parse","toDateString","buttonText","getSubscriberButtonText","channelThumbnail","circular","color","compact","onClick","videoDescription","split","paragraph","Linkify_default","subscriberCount","CommentsHeader","amountComments","Comment","comment","topLevelComment","_topLevelComment$snip","authorProfileImageUrl","authorDisplayName","textOriginal","AddComment","TextArea","control","autoHeight","Comments","comments","Comment_Comment","CommentsHeader_CommentsHeader","AddComment_AddComment","NextUpVideo","Checkbox","toggle","defaultChecked","RelatedVideos","nextUpVideo","relatedVideosPreviews","relatedVideo","NextUpVideo_NextUpVideo","getChannel","channels","COMMENT_THREAD","thread","byVideo","reduceCommentThread","newComments","item","prevCommentIds","ids","commentIds","toConsumableArray","byVideoComment","defineProperty","getCommentsForVideo","allComments","commentId","getCommentNextPageToken","WatchContent","Video_Video","VideoMetadata_VideoMetadata","VideoInfoBox_VideoInfoBox_VideoInfoBox","RelatedVideos_RelatedVideos","relatedVideos","Comments_Comments","Watch","_getPrototypeOf2","_len","args","Array","_key","fetchMoreComments","fetchCommentThread","getVideoId","Watch_WatchContent_WatchContent","fetchWatchContent","fetchWatchDetails","watchActions","commentActions","VideoList","videoPreviews","getVideoPreviews","Trending","fetchMoreVideos","fetchTrendingVideos","loaderActive","VideoList_VideoList_VideoList","SEARCH_FOR_VIDEOS","forVideos","searchQuery","getSearchResults","results","getSearchNextPageToken","Search","searchForVideos","getSearchQuery","searchResults","youtubeApiLoaded","searchActions","App","AppLayout_AppLayout","react_router","component","render","containers_Search_Search","containers_Watch_Watch","loadYoutubeApi","_this2","script","document","onload","gapi","load","client","setApiKey","body","appendChild","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","error","combineReducers","videoMap","hasOwnProperty","pageInfo","reduceFetchMostPopularVideos","categoryMapping","category","reduceFetchVideoCategories","responses","byCategoryMap","forEach","status","_groupVideosByIdAndCa","groupVideosByIdAndCategory","result","reduceFetchMostPopularVideosByCategory","find","r","kind","relatedEntry","_relatedVideosRespons","reduceRelatedVideosRequest","reduceWatchDetails","parsedVideos","reduceVideoDetails","channelResponse","channelEntry","res","prevResults","reduceSearchForVideos","buildMostPopularVideosRequest","fields","buildApiRequest","part","chart","maxResults","regionCode","pageToken","videoCategoryId","buildVideoDetailRequest","buildChannelRequest","buildCommentThreadRequest","buildSearchRequest","q","buildRelatedVideosRequest","relatedToVideoId","requestMethod","params","properties","removeEmptyParams","resource","normalizedProps","substr","adjustedName","replace","prop","propArray","ref","pa","createResource","method","watchMostPopularVideos","watchVideoCategories","watchMostPopularVideosByCategory","fetchEntity","requests","regenerator_default","wrap","_context","wrapper","ignoreErrors","all","sent","put","t0","stop","_marked","_context2","_marked2","_ref","_context3","take","fork","_marked3","_context4","takeEvery","_marked4","_ref2","_context5","_marked5","fetchVideoDetails","watchWatchDetails","fn","watch_marked","shouldFetchChannelInfo","searchListResponse","videoDetailResponse","_responses","relatedVideoId","watch_marked2","watch_marked3","watchCommentThread","comment_marked","comment_marked2","watchSearchForVideos","search_marked","search_marked2","_callee","sagas_marked","entity","_args2","sagas_marked2","_len2","_key2","ignoreErrorCallback","store","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","run","rootSaga","configureStore","ReactDOM","es","src_App","getElementById","URL","process","origin","addEventListener","fetch","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.6615f822.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e5520ae2.jpg\";","export const REQUEST = 'REQUEST';\nexport const SUCCESS = 'SUCCESS';\nexport const FAILURE = 'FAILURE';\nexport function createRequestTypes(base) {\n  if (!base) {\n    throw new Error('cannot create request type with base = \\'\\' or base = null');\n  }\n  return [REQUEST, SUCCESS, FAILURE].reduce((acc, type) => {\n    acc[type] = `${base}_${type}`;\n    return acc;\n  }, {});\n}\n\nexport function createAction(type, payload = {}) {\n  return {\n    type,\n    ...payload,\n  };\n}","import {createAction, createRequestTypes, REQUEST, SUCCESS, FAILURE} from './index';\n\nexport const VIDEO_CATEGORIES = createRequestTypes('VIDEO_CATEGORIES');\nexport const categories = {\n  request: () => createAction(VIDEO_CATEGORIES[REQUEST]),\n  success: (response) => createAction(VIDEO_CATEGORIES[SUCCESS], {response}),\n  failure: (response) => createAction(VIDEO_CATEGORIES[FAILURE], {response}),\n};\n\nexport const MOST_POPULAR = createRequestTypes('MOST_POPULAR');\nexport const mostPopular = {\n  request: (amount, loadDescription, nextPageToken) => createAction(MOST_POPULAR[REQUEST], {amount, loadDescription, nextPageToken}),\n  success: (response) => createAction(MOST_POPULAR[SUCCESS], {response}),\n  failure: (response) => createAction(MOST_POPULAR[FAILURE], {response}),\n};\n\nexport const MOST_POPULAR_BY_CATEGORY = createRequestTypes('MOST_POPULAR_BY_CATEGORY');\nexport const mostPopularByCategory = {\n  request: (categories) => createAction(MOST_POPULAR_BY_CATEGORY[REQUEST], {categories}),\n  success: (response, categories) => createAction(MOST_POPULAR_BY_CATEGORY[SUCCESS], {response, categories}),\n  failure: (response) => createAction(MOST_POPULAR_BY_CATEGORY[FAILURE], response),\n};","import React from 'react';\nimport {Icon, Menu} from \"semantic-ui-react\";\nimport './SideBarItem.scss';\nimport {Link, withRouter} from 'react-router-dom';\n\nexport class SideBarItem extends React.Component {\n  render() {\n    // React will ignore custom boolean attributes, therefore we pass a string\n    // we use this attribute in our SCSS for styling\n    const highlight = this.shouldBeHighlighted() ? 'highlight-item' : null;\n    return (\n      <Link to={{pathname: this.props.path}}>\n        <Menu.Item className={['sidebar-item', highlight].join(' ')}>\n          <div className='sidebar-item-alignment-container'>\n            <span><Icon size='large' name={this.props.icon}/> </span>\n            <span>{this.props.label}</span>\n          </div>\n        </Menu.Item>\n      </Link>\n    );\n  }\n\n  shouldBeHighlighted() {\n    const {pathname} = this.props.location;\n    if (this.props.path === '/') {\n      return pathname === this.props.path;\n    }\n    return pathname.includes(this.props.path);\n  }\n}\n\nexport default withRouter(SideBarItem);","import React from 'react';\nimport {Menu} from 'semantic-ui-react';\nimport './SideBarHeader.scss';\n\nexport function SideBarHeader(props) {\n  const heading = props.title ? props.title.toUpperCase() : '';\n  return (\n    <Menu.Item>\n      <Menu.Header className='side-bar-header'>{heading}</Menu.Header>\n    </Menu.Item>\n  );\n}\n","import React from 'react';\nimport {Icon, Image, Menu} from \"semantic-ui-react\";\nimport './Subscription.scss';\n\nexport function Subscription(props) {\n\n  let rightElement = null;\n  const {broadcasting, amountNewVideos} = props;\n  if (broadcasting) {\n    rightElement = <Icon name='signal'/>;\n  } else if (amountNewVideos) {\n    rightElement = <span className='new-videos-count'>{amountNewVideos}</span>;\n  }\n\n  return (\n    <Menu.Item>\n      <div className='subscription'>\n        <div>\n          <Image src='http://via.placeholder.com/28x28' avatar/>\n          <span>{props.label}</span>\n        </div>\n        {rightElement}\n      </div>\n    </Menu.Item>\n  );\n}\n","import React from 'react';\nimport {Subscription} from \"./Subscription/Subscription\";\nimport {Divider} from \"semantic-ui-react\";\nimport {SideBarHeader} from '../SideBarHeader/SideBarHeader';\n\nexport class Subscriptions extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        <SideBarHeader title='Subscriptions'/>\n        <Subscription label='PewDiePie' broadcasting/>\n        <Subscription label='Joe Robinet' amountNewVideos={10}/>\n        <Subscription label='Venture 4wd' amountNewVideos={23}/>\n        <Subscription label='Man City' amountNewVideos={4}/>\n        <Subscription label='MarleyThirteen' amountNewVideos={114}/>\n        <Divider/>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport './SideBarFooter.scss'\n\nexport function SideBarFooter() {\n  return (\n    <React.Fragment>\n      <div className='footer-block'>\n        <div>About Press Copyright</div>\n        <div>Creators Advertise</div>\n        <div>Developers +MyTube</div>\n        <div>Legal</div>\n      </div>\n      <div className='footer-block'>\n        <div>Terms Privacy</div>\n        <div>Policy & Safety</div>\n        <div>Test new features</div>\n      </div>\n      <div className='footer-block'>\n        <div><a href='https://github.com/marvtron/youtube-react' target='_blank' rel='noreferrer noopener'>View GitHub repo</a></div>\n      </div>\n      <div className='footer-block'>\n        <div>© marvtrondev - A Youtube clone for educational purposes under fair use.</div>\n      </div>\n    </React.Fragment>\n  );\n}","import React from 'react';\nimport SideBarItem from './SideBarItem/SideBarItem';\nimport {Menu, Divider} from 'semantic-ui-react';\nimport './SideBar.scss';\nimport {SideBarHeader} from './SideBarHeader/SideBarHeader';\nimport {Subscriptions} from './Subscriptions/Subscriptions';\nimport {SideBarFooter} from './SideBarFooter/SideBarFooter';\n\nexport class SideBar extends React.Component {\n  render() {\n    return (\n      <Menu borderless vertical stackable fixed='left' className='side-nav'>\n        <SideBarItem path='/' label='Home' icon='home'/>\n        <SideBarItem path='/feed/trending' label='Trending' icon='fire'/>\n        <SideBarItem label='Followers' icon='spy'/>\n        <Divider/>\n        <SideBarHeader title='Library'/>\n        <SideBarItem label='History' icon='history'/>\n        <SideBarItem label='Watch later' icon='clock'/>\n        <SideBarItem label='Liked videos' icon='thumbs up'/>\n        <Divider/>\n        <Subscriptions/>\n        <SideBarHeader title='More from Youtube'/>\n        <SideBarItem label='Movies and Shows' icon='film'/>\n        <Divider/>\n        <SideBarItem label='Report history' icon='flag'/>\n        <SideBarItem label='Help' icon='help circle'/>\n        <SideBarItem label='Send feedback' icon='comment'/>\n        <Divider/>\n        <SideBarFooter/>\n      </Menu>\n    );\n  }\n}","import React from 'react';\nimport './VideoGridHeader.scss';\n\nexport function VideoGridHeader(props) {\n  return (\n    <div className='video-grid-header'>\n      <span className='title'>{props.title}</span>\n    </div>\n  );\n}\n","const UNITS = ['K', 'M', 'B', 'T'];\n\n// https://stackoverflow.com/a/28608086/2328833\nexport function getShortNumberString(number) {\n  const shouldShowDecimalPlace = UNITS.some((element, index) => {\n    const lowerBound = Math.pow(1000, index + 1);\n    const upperBound = lowerBound + lowerBound * 10;\n    return  number > lowerBound && number < upperBound\n  });\n  const digits = shouldShowDecimalPlace ? 1 : 0;\n  for (let i = UNITS.length - 1; i >= 0; i--) {\n    const decimal = Math.pow(1000, i + 1);\n\n    if (number >= decimal) {\n      return (number / decimal).toFixed(digits) + UNITS[i];\n    }\n  }\n  return number.toString();\n}","const objMap = ['years', 'months','days', 'hours', 'minutes', 'seconds'];\nconst numbers = '\\\\d+(?:[\\\\.,]\\\\d{0,3})?';\nconst datePattern = `(${numbers}Y)?(${numbers}M)?(${numbers}D)?`;\nconst timePattern = `T(${numbers}H)?(${numbers}M)?(${numbers}S)?`;\nconst pattern = new RegExp(`P(?:${datePattern}(?:${timePattern})?)`);\n\nexport function parseISO8601TimePattern(durationString) {\n  // https://github.com/tolu/ISO8601-duration/blob/master/src/index.js\n  return durationString.match(pattern).slice(1).reduce((prev, next, idx) => {\n    prev[objMap[idx]] = parseFloat(next) || 0;\n    return prev\n  }, {});\n}\n\nexport function getPublishedAtDateString(iso8601DateString) {\n  if (!iso8601DateString) {\n    return '';\n  }\n  const date = new Date(Date.parse(iso8601DateString));\n  return date.toDateString();\n}\n\nexport function getVideoDurationString(iso8601DurationString) {\n  if (!iso8601DurationString || iso8601DurationString === '') {\n    return '';\n  }\n\n  // new Date(Date.parse(...)) doesn't work here\n  // therefore we are using our regex approach\n  let {days, hours, minutes, seconds} = parseISO8601TimePattern(iso8601DurationString);\n\n  let secondsString = seconds.toString();\n  let minutesString = minutes.toString();\n  let accumulatedHours = days * 24 + hours;\n\n  if (seconds < 10) {\n    secondsString = seconds.toString().padStart(2, '0');\n  }\n  if (minutes < 10 && hours !== 0) {\n    minutesString = minutesString.toString().padStart(2, '0');\n  }\n  if (!accumulatedHours) {\n    return [minutesString, secondsString].join(':');\n  } else {\n    return [accumulatedHours, minutesString, secondsString].join(':');\n  }\n}\n","import React from 'react';\nimport {Image} from 'semantic-ui-react';\nimport './VideoPreview.scss';\n\nimport TimeAgo from 'javascript-time-ago';\nimport en from 'javascript-time-ago/locale/en';\nimport {getShortNumberString} from '../../services/number/number-format';\nimport {getVideoDurationString} from '../../services/date/date-format';\nimport {Link} from 'react-router-dom';\n\nTimeAgo.locale(en);\nconst timeAgo = new TimeAgo('en-US');\n\nexport class VideoPreview extends React.Component {\n  render() {\n    const {video} = this.props;\n    if (!video) {\n      return <div/>;\n    }\n\n    const duration = video.contentDetails ? video.contentDetails.duration : null;\n    const videoDuration = getVideoDurationString(duration);\n    const viewAndTimeString = VideoPreview.getFormattedViewAndTime(video);\n    const horizontal = this.props.horizontal ? 'horizontal' : null;\n    const expanded = this.props.expanded ? 'expanded' : null;\n    const description = this.props.expanded ? video.snippet.description : null;\n\n    return (\n      <Link to={{pathname: this.props.pathname, search: this.props.search}}>\n        <div className={['video-preview', horizontal, expanded].join(' ')}>\n          <div className='image-container'>\n            <Image src={video.snippet.thumbnails.medium.url}/>\n            <div className='time-label'>\n              <span>{videoDuration}</span>\n            </div>\n          </div>\n\n          <div className='video-info'>\n            <div className={['semi-bold', 'show-max-two-lines', expanded].join(' ')}>{video.snippet.title}</div>\n            <div className='video-preview-metadata-container'>\n              <div className='channel-title'>{video.snippet.channelTitle}</div>\n              <div className='view-and-time'>{viewAndTimeString}</div>\n              <div className='show-max-two-lines'>{description}</div>\n            </div>\n          </div>\n        </div>\n      </Link>\n    );\n  }\n\n  static getFormattedViewAndTime(video) {\n    const publicationDate = new Date(video.snippet.publishedAt);\n    const viewCount = video.statistics ? video.statistics.viewCount : null;\n    if(viewCount) {\n      const viewCountShort = getShortNumberString(video.statistics.viewCount);\n      return `${viewCountShort} views • ${timeAgo.format(publicationDate)}`;\n    }\n    return '';\n  }\n}","import React from 'react';\nimport './VideoGrid.scss';\nimport {VideoGridHeader} from \"./VideoGridHeader/VideoGridHeader\";\nimport {Divider} from \"semantic-ui-react\";\nimport {VideoPreview} from '../VideoPreview/VideoPreview';\n\nexport function VideoGrid(props) {\n  if (!props.videos || !props.videos.length) {\n    return <div/>;\n  }\n  const gridItems = props.videos.map(video => {\n    return (<VideoPreview video={video}\n                          key={video.id}\n                          pathname='/watch'\n                          search={`?v=${video.id}`}/>\n    );\n  });\n\n  const divider = props.hideDivider ? null : <Divider/>;\n  return (\n    <React.Fragment>\n      <VideoGridHeader title={props.title}/>\n      <div className='video-grid'>\n        {gridItems}\n      </div>\n      {divider}\n    </React.Fragment>\n  );\n}","export const VIDEO_LIST_RESPONSE = 'youtube#videoListResponse';\nexport const CHANNEL_LIST_RESPONSE = 'youtube#channelListResponse';\nexport const SEARCH_LIST_RESPONSE = 'youtube#searchListResponse';\nexport const COMMENT_THREAD_LIST_RESPONSE = 'youtube#commentThreadListResponse';","import {createAction, createRequestTypes, FAILURE, REQUEST, SUCCESS} from './index';\n\nexport const WATCH_DETAILS = createRequestTypes('WATCH_DETAILS');\nexport const details = {\n  request: (videoId, channelId) => createAction(WATCH_DETAILS[REQUEST], {videoId, channelId}),\n  success: (response, videoId) => createAction(WATCH_DETAILS[SUCCESS], {response, videoId}),\n  failure: (response) => createAction(WATCH_DETAILS[FAILURE], {response}),\n};\n\nexport const VIDEO_DETAILS = createRequestTypes('VIDEO_DETAILS');\nexport const videoDetails = {\n  request: () => {\n    throw Error('not implemented');\n  },\n  success: (response) => createAction(VIDEO_DETAILS[SUCCESS], {response}),\n  failure: (response) => createAction(VIDEO_DETAILS[FAILURE], {response}),\n};\n","export const getSearchParam = (location, name) => {\n    if (!location || !location.search) {\n      return null;\n    }\n    const searchParams = new URLSearchParams(location.search);\n    return searchParams.get(name);\n  };","import {MOST_POPULAR, MOST_POPULAR_BY_CATEGORY, VIDEO_CATEGORIES} from '../actions/video';\nimport {SUCCESS} from '../actions';\nimport {createSelector} from 'reselect';\nimport {SEARCH_LIST_RESPONSE, VIDEO_LIST_RESPONSE} from '../api/youtube-api-response-types';\nimport {VIDEO_DETAILS, WATCH_DETAILS} from '../actions/watch';\nimport {getSearchParam} from '../../services/url';\n\nexport const initialState = {\n  byId: {},\n  mostPopular: {},\n  categories: {},\n  byCategory: {},\n  related: {},\n};\nexport default function videos(state = initialState, action) {\n  switch (action.type) {\n    case MOST_POPULAR[SUCCESS]:\n      return reduceFetchMostPopularVideos(action.response, state);\n    case VIDEO_CATEGORIES[SUCCESS]:\n      return reduceFetchVideoCategories(action.response, state);\n    case MOST_POPULAR_BY_CATEGORY[SUCCESS]:\n      return reduceFetchMostPopularVideosByCategory(action.response, action.categories, state);\n    case WATCH_DETAILS[SUCCESS]:\n      return reduceWatchDetails(action.response, state);\n    case VIDEO_DETAILS[SUCCESS]:\n      return reduceVideoDetails(action.response, state);\n    default:\n      return state;\n  }\n}\n\nfunction reduceFetchMostPopularVideos(response, prevState) {\n  const videoMap = response.items.reduce((accumulator, video) => {\n    accumulator[video.id] = video;\n    return accumulator;\n  }, {});\n\n  let items = Object.keys(videoMap);\n  if (response.hasOwnProperty('prevPageToken') && prevState.mostPopular) {\n    items = [...prevState.mostPopular.items, ...items];\n  }\n\n  const mostPopular = {\n    totalResults: response.pageInfo.totalResults,\n    nextPageToken: response.nextPageToken,\n    items,\n  };\n\n  return {\n    ...prevState,\n    mostPopular,\n    byId: {...prevState.byId, ...videoMap},\n  };\n}\n\nfunction reduceFetchVideoCategories(response, prevState) {\n  const categoryMapping = response.items.reduce((accumulator, category) => {\n    accumulator[category.id] = category.snippet.title;\n    return accumulator;\n  }, {});\n  return {\n    ...prevState,\n    categories: categoryMapping,\n  };\n}\n\nfunction reduceFetchMostPopularVideosByCategory(responses, categories, prevState) {\n  let videoMap = {};\n  let byCategoryMap = {};\n\n  responses.forEach((response, index) => {\n    // ignore answer if there was an error\n    if (response.status === 400) return;\n\n    const categoryId = categories[index];\n    const {byId, byCategory} = groupVideosByIdAndCategory(response.result);\n    videoMap = {...videoMap, ...byId};\n    byCategoryMap[categoryId] = byCategory;\n  });\n\n  // compute new state\n  return {\n    ...prevState,\n    byId: {...prevState.byId, ...videoMap},\n    byCategory: {...prevState.byCategory, ...byCategoryMap},\n  };\n}\n\nfunction groupVideosByIdAndCategory(response) {\n  const videos = response.items;\n  const byId = {};\n  const byCategory = {\n    totalResults: response.pageInfo.totalResults,\n    nextPageToken: response.nextPageToken,\n    items: [],\n  };\n\n  videos.forEach((video) => {\n    byId[video.id] = video;\n\n    const items = byCategory.items;\n    if(items && items) {\n      items.push(video.id);\n    } else {\n      byCategory.items = [video.id];\n    }\n  });\n\n  return {byId, byCategory};\n}\n\nfunction reduceWatchDetails(responses, prevState) {\n  const videoDetailResponse = responses.find(r => r.result.kind === VIDEO_LIST_RESPONSE);\n  // we know that items will only have one element\n  // because we explicitly asked for a video with a specific id\n  const video = videoDetailResponse.result.items[0];\n  const relatedEntry = reduceRelatedVideosRequest(responses);\n\n  return {\n    ...prevState,\n    byId: {\n      ...prevState.byId,\n      [video.id]: video\n    },\n    related: {\n      ...prevState.related,\n      [video.id]: relatedEntry\n    }\n  };\n}\n\nfunction reduceRelatedVideosRequest(responses) {\n  const relatedVideosResponse = responses.find(r => r.result.kind === SEARCH_LIST_RESPONSE);\n  const {pageInfo, items, nextPageToken} = relatedVideosResponse.result;\n  const relatedVideoIds = items.map(video => video.id.videoId);\n\n  return {\n    totalResults: pageInfo.totalResults,\n    nextPageToken,\n    items: relatedVideoIds\n  };\n}\n\nfunction reduceVideoDetails(responses, prevState) {\n  const videoResponses = responses.filter(response => response.result.kind === VIDEO_LIST_RESPONSE);\n  const parsedVideos = videoResponses.reduce((videoMap, response) => {\n    // we're explicitly asking for a video with a particular id\n    // so the response set must either contain 0 items (if a video with the id does not exist)\n    // or at most one item (i.e. the channel we've been asking for)\n    const video = response.result.items ? response.result.items[0] : null;\n    if (!video) {\n      return videoMap;\n    }\n    videoMap[video.id] = video;\n    return videoMap;\n  }, {});\n\n  return {\n    ...prevState,\n    byId: {...prevState.byId, ...parsedVideos},\n  };\n}\n\n/* function reduceVideoDetails(responses) {\n  const videoResponses = responses.filter(response => response.result.kind === VIDEO_LIST_RESPONSE);\n  return videoResponses.reduce((accumulator, response) => {\n    response.result.items.forEach(video => {\n      accumulator[video.id] = video;\n    });\n    return accumulator;\n  }, {});\n}\nfunction reduceRelatedVideos(responses, videoIds) {\n  const videoResponses = responses.filter(response => response.result.kind === SEARCH_LIST_RESPONSE);\n  return videoResponses.reduce((accumulator, response, index) => {\n    const relatedIds = response.result.items.map(video => video.id.videoId);\n    accumulator[videoIds[index]] = {\n      totalResults: response.result.pageInfo.totalResults,\n      nextPageToken: response.result.nextPageToken,\n      items: relatedIds\n    };\n    return accumulator;\n  }, {});\n} */\n\n\n/*\n*   Selectors\n* */\nconst getMostPopular = (state) => state.videos.mostPopular;\nexport const getMostPopularVideos = createSelector(\n  (state) => state.videos.byId,\n  getMostPopular,\n  (videosById, mostPopular) => {\n    if (!mostPopular || !mostPopular.items) {\n      return [];\n    }\n    return mostPopular.items.map(videoId => videosById[videoId]);\n  }\n);\nexport const getVideoCategoryIds = createSelector(\n  state => state.videos.categories,\n  (categories) => {\n    return Object.keys(categories || {});\n  }\n);\n\nexport const getVideosByCategory = createSelector(\n  state => state.videos.byCategory,\n  state => state.videos.byId,\n  state => state.videos.categories,\n  (videosByCategory, videosById, categories) => {\n    return Object.keys(videosByCategory || {}).reduce((accumulator, categoryId) => {\n      const videoIds = videosByCategory[categoryId].items;\n      const categoryTitle = categories[categoryId];\n      accumulator[categoryTitle] = videoIds.map(videoId => videosById[videoId]);\n      return accumulator;\n    }, {});\n  }\n);\n\nexport const videoCategoriesLoaded = createSelector(\n  state => state.videos.categories,\n  (categories) => {\n    return Object.keys(categories || {}).length !== 0;\n  }\n);\n\nexport const videosByCategoryLoaded = createSelector(\n  state => state.videos.byCategory,\n  (videosByCategory) => {\n    return Object.keys(videosByCategory || {}).length;\n  }\n);\n\nexport const getVideoById = (state, videoId) => {\n  return state.videos.byId[videoId];\n};\nconst getRelatedVideoIds = (state, videoId) => {\n  const related = state.videos.related[videoId];\n  return related ? related.items : [];\n};\nexport const getRelatedVideos = createSelector(\n  getRelatedVideoIds,\n  state => state.videos.byId,\n  (relatedVideoIds, videos) => {\n    if (relatedVideoIds) {\n      // filter kicks out null values we might have\n      return relatedVideoIds.map(videoId => videos[videoId]).filter(video => video);\n    }\n    return [];\n  });\n\nexport const getChannelId = (state, location, name) => {\n  const videoId = getSearchParam(location, name);\n  const video = state.videos.byId[videoId];\n  if (video) {\n    return video.snippet.channelId;\n  }\n  return null;\n};\n\nexport const getAmountComments = createSelector(\n  getVideoById,\n  (video) => {\n    if (video) {\n      return video.statistics.commentCount;\n    }\n    return 0;\n  });\n\nexport const allMostPopularVideosLoaded = createSelector(\n  [getMostPopular],\n  (mostPopular) => {\n    const amountFetchedItems = mostPopular.items ? mostPopular.items.length : 0;\n    return amountFetchedItems === mostPopular.totalResults;\n  }\n);\n\nexport const getMostPopularVideosNextPageToken = createSelector(\n  [getMostPopular],\n  (mostPopular) => {\n    return mostPopular.nextPageToken;\n  }\n);","import React from 'react';\nimport {Waypoint} from 'react-waypoint';\nimport {Loader} from 'semantic-ui-react';\nimport './InfiniteScroll.scss';\n\nexport function InfiniteScroll(props) {\n  return (\n    <React.Fragment>\n      {props.children}\n      <Waypoint onEnter={props.bottomReachedCallback}>\n        <div className='loader-container'>\n          <Loader active={props.showLoader} inline='centered' />\n        </div>\n      </Waypoint>\n    </React.Fragment>\n  );\n}\n","import {VideoGrid} from '../../../components/VideoGrid/VideoGrid';\nimport React from 'react';\nimport './HomeContent.scss';\nimport {getMostPopularVideos, getVideosByCategory} from '../../../store/reducers/videos';\nimport {connect} from 'react-redux';\nimport {InfiniteScroll} from '../../../components/InfiniteScroll/InfiniteScroll';\n\nconst AMOUNT_TRENDING_VIDEOS = 12;\n\nexport class HomeContent extends React.Component {\n  render() {\n    const trendingVideos = this.getTrendingVideos();\n    const categoryGrids = this.getVideoGridsForCategories();\n\n    return (\n      <div className='home-content'>\n        <div className=\"responsive-video-grid-container\">\n          <InfiniteScroll bottomReachedCallback={this.props.bottomReachedCallback} showLoader={this.props.showLoader}>\n            <VideoGrid title='Trending' videos={trendingVideos}/>\n            {categoryGrids}\n          </InfiniteScroll>\n        </div>\n      </div>\n    );\n  }\n\n  getTrendingVideos() {\n    return this.props.mostPopularVideos.slice(0, AMOUNT_TRENDING_VIDEOS);\n  }\n\n  getVideoGridsForCategories() {\n    const categoryTitles = Object.keys(this.props.videosByCategory || {});\n    return categoryTitles.map((categoryTitle,index) => {\n      const videos = this.props.videosByCategory[categoryTitle];\n      // the last video grid element should not have a divider\n      const hideDivider = index === categoryTitles.length - 1;\n      return <VideoGrid title={categoryTitle} videos={videos} key={categoryTitle} hideDivider={hideDivider}/>;\n    });\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    videosByCategory: getVideosByCategory(state),\n    mostPopularVideos: getMostPopularVideos(state),\n  };\n}\nexport default connect(mapStateToProps, null)(HomeContent);","import {createAction} from './index';\n\nexport const YOUTUBE_LIBRARY_LOADED = 'YOUTUBE_LIBRARY_LOADED';\nexport const youtubeLibraryLoaded = createAction.bind(null, YOUTUBE_LIBRARY_LOADED);","import {YOUTUBE_LIBRARY_LOADED} from '../actions/api';\n\nconst initialState = {\n  libraryLoaded: false,\n};\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case YOUTUBE_LIBRARY_LOADED:\n      return {\n        libraryLoaded: true,\n      };\n    default:\n      return state;\n  }\n}\nexport const getYoutubeLibraryLoaded = (state) => state.api.libraryLoaded;","import React from 'react';\nimport {connect} from \"react-redux\";\nimport * as videoActions from \"../../store/actions/video\";\nimport './Home.scss';\nimport {SideBar} from '../SideBar/SideBar';\nimport HomeContent from './HomeContent/HomeContent';\nimport {bindActionCreators} from 'redux';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport {getVideoCategoryIds, videoCategoriesLoaded, videosByCategoryLoaded} from '../../store/reducers/videos';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categoryIndex: 0,\n    };\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <SideBar/>\n        <HomeContent\n          bottomReachedCallback={this.bottomReachedCallback}\n          showLoader={this.shouldShowLoader()}/>\n      </React.Fragment>\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    } else if (this.props.videoCategories !== prevProps.videoCategories) {\n      this.fetchVideosByCategory();\n    }\n  }\n\n  fetchVideosByCategory() {\n    const categoryStartIndex = this.state.categoryIndex;\n    const categories = this.props.videoCategories.slice(categoryStartIndex, categoryStartIndex + 3);\n    this.props.fetchMostPopularVideosByCategory(categories);\n    this.setState(prevState => {\n      return {\n        categoryIndex: prevState.categoryIndex + 3,\n      };\n    });\n  }\n\n  fetchCategoriesAndMostPopularVideos() {\n    this.props.fetchMostPopularVideos();\n    this.props.fetchVideoCategories();\n  }\n\n  bottomReachedCallback = () => {\n    if (!this.props.videoCategoriesLoaded) {\n      return;\n    }\n    this.fetchVideosByCategory();\n  };\n\n  shouldShowLoader() {\n    if (this.props.videoCategoriesLoaded && this.props.videosByCategoryLoaded) {\n      return this.state.categoryIndex < this.props.videoCategories.length;\n    }\n    return false;\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    videoCategories: getVideoCategoryIds(state),\n    videoCategoriesLoaded: videoCategoriesLoaded(state),\n    videosByCategoryLoaded: videosByCategoryLoaded(state),\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const fetchMostPopularVideos = videoActions.mostPopular.request;\n  const fetchVideoCategories = videoActions.categories.request;\n  const fetchMostPopularVideosByCategory = videoActions.mostPopularByCategory.request;\n  return bindActionCreators({fetchMostPopularVideos, fetchVideoCategories, fetchMostPopularVideosByCategory}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","import React from 'react';\nimport {Form, Icon, Image, Input, Menu} from 'semantic-ui-react';\nimport './HeaderNav.scss';\nimport logo from '../../assets/images/logo.jpg';\nimport {Link, withRouter} from 'react-router-dom';\n\nexport class HeaderNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n    };\n  }\n  render() {\n    return (\n      // 1\n      <Menu borderless className='top-menu' fixed='top'>\n        {/* 2 */}\n        <Menu.Item header className='logo'>\n          <Link to='/'><Image src={logo} size='tiny'/></Link>\n        </Menu.Item>\n        {/* 3 */}\n        <Menu.Menu className='nav-container'>\n          <Menu.Item className='search-input'>\n            <Form onSubmit={this.onSubmit}>\n              {/* 4 */}\n              <Form.Field>\n                <Input placeholder='Search'\n                       size='small'\n                       action='Go'\n                       value={this.state.query}\n                       onChange={this.onInputChange}\n                />\n              </Form.Field>\n            </Form>\n          </Menu.Item>\n          {/* 5 */}\n          <Menu.Menu position='right'>\n            <Menu.Item>\n              {/* 6 */}\n              <Icon className='header-icon' name='video camera' size='large'/>\n            </Menu.Item>\n            <Menu.Item>\n              <Icon className='header-icon' name='grid layout' size='large'/>\n            </Menu.Item>\n            <Menu.Item>\n              <Icon className='header-icon' name='chat' size='large'/>\n            </Menu.Item>\n            <Menu.Item>\n              <Icon className='header-icon' name='alarm' size='large'/>\n            </Menu.Item>\n            {/* 7*/}\n            <Menu.Item name='avatar'>\n              <Image src='http://via.placeholder.com/80x80' avatar/>\n            </Menu.Item>\n          </Menu.Menu>\n        </Menu.Menu>\n      </Menu>\n    );\n  }\n  onInputChange = (event) => {\n    this.setState({\n      query: event.target.value,\n    });\n  };\n\n  onSubmit = () => {\n    const escapedSearchQuery = encodeURI(this.state.query);\n    this.props.history.push(`/results?search_query=${escapedSearchQuery}`);\n  };\n}\n\nexport default withRouter(HeaderNav);","import React from 'react';\nimport {withRouter} from 'react-router-dom';\n\nexport class ScrollToTop extends React.Component {\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location && window) {\n      window.scrollTo(0, 0);\n    }\n  }\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default withRouter(ScrollToTop);","import React from 'react';\nimport './AppLayout.scss';\nimport HeaderNav from '../../containers/HeaderNav/HeaderNav';\nimport ScrollToTop from '../ScrollToTop/ScrollToTop';\n\nexport function AppLayout(props) {\n  return (\n    <ScrollToTop>\n      <div className='app-layout'>\n        <HeaderNav/>\n        {props.children}\n      </div>\n    </ScrollToTop>\n  );\n}","import React from 'react';\nimport './Video.scss';\n\nconst BASE_EMBED_URL = 'https://www.youtube.com/embed/';\n\nexport function Video(props) {\n  if(!props.id) {\n    return null;\n  }\n  //const embedUrl = `${BASE_EMBED_URL}${props.id}?autoplay=1`;\n  const embedUrl = `${BASE_EMBED_URL}${props.id}`;\n  return (\n    <div className='video-container'>\n      <div className=\"video\">\n        <iframe className='video-player' src={embedUrl} frameBorder='0'\n                allow='autoplay; encrypted-media' allowFullScreen title='video' />\n      </div>\n\n    </div>\n  );\n}","import React from 'react';\nimport './Rating.scss';\nimport {Icon, Progress} from \"semantic-ui-react\";\nimport {getShortNumberString} from '../../services/number/number-format';\n\nexport function Rating(props) {\n  let rating = null;\n  let likeCount = props.likeCount !== 0 ? props.likeCount : null;\n  let dislikeCount = null;\n\n  if(props.likeCount && props.dislikeCount) {\n    const amountLikes = parseFloat(props.likeCount);\n    const amountDislikes = parseFloat(props.dislikeCount);\n    const percentagePositiveRatings = 100.0 * (amountLikes / (amountLikes + amountDislikes));\n\n    // Now that we have calculated the percentage, we bring the numbers into a better readable format\n    likeCount = getShortNumberString(amountLikes);\n    dislikeCount = getShortNumberString(amountDislikes);\n    rating = <Progress percent={percentagePositiveRatings} size='tiny'/>;\n  }\n  return (\n    <div className='rating'>\n      <div >\n        <Icon name='thumbs outline up'/>\n        <span>{likeCount}</span>\n      </div>\n      <div >\n        <Icon name='thumbs outline down'/>\n        <span>{dislikeCount}</span>\n      </div>\n      {rating}\n    </div>\n  );\n}","import React from 'react';\nimport {Button, Divider, Icon} from \"semantic-ui-react\";\nimport './VideoMetadata.scss';\nimport {Rating} from '../Rating/Rating';\n\nexport function VideoMetadata(props) {\n  if (!props.video || !props.video.statistics) {\n    return <div/>;\n  }\n  const viewCount = Number(props.video.statistics.viewCount).toLocaleString();\n\n  return (\n    <div className='video-metadata'>\n      <h3>{props.video.snippet.title}</h3>\n      <div className='video-stats'>\n        <span>{viewCount} views</span>\n        <div className='video-actions' >\n          <Rating likeCount={props.video.statistics.likeCount}\n                  dislikeCount={props.video.statistics.dislikeCount}/>\n          <Button basic icon labelPosition='left'>\n            <Icon name='share'/>\n            Share\n          </Button>\n          <Button basic icon>\n            <Icon name='add circle' />\n          </Button>\n          <Button basic icon>\n            <Icon name='ellipsis horizontal' />\n          </Button>\n        </div>\n      </div>\n      <Divider/>\n    </div>\n  );\n}","import React from 'react';\nimport './VideoInfoBox.scss';\nimport {Image, Button, Divider} from 'semantic-ui-react';\nimport Linkify from 'react-linkify';\nimport {getPublishedAtDateString} from '../../services/date/date-format';\nimport {getShortNumberString} from '../../services/number/number-format';\n\nexport class VideoInfoBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapsed: true,\n    };\n  }\n\n  render() {\n    if (!this.props.video || !this.props.channel) {\n      return <div/>;\n    }\n\n    const descriptionParagraphs = this.getDescriptionParagraphs();\n    const {descriptionTextClass, buttonTitle} = this.getConfig();\n    const publishedAtString = getPublishedAtDateString(this.props.video.snippet.publishedAt);\n\n    const {channel} = this.props;\n    const buttonText = this.getSubscriberButtonText();\n    const channelThumbnail = channel.snippet.thumbnails.medium.url;\n    const channelTitle = channel.snippet.title;\n\n    return (\n      <div>\n        <div className='video-info-box'>\n          <Image className='channel-image' src={channelThumbnail} circular/>\n          <div className=\"video-info\">\n            <div className='channel-name'>{channelTitle}</div>\n            <div className='video-publication-date'>{publishedAtString}</div>\n          </div>\n          <Button className='subscribe' color='youtube'>{buttonText}</Button>\n          <div className=\"video-description\">\n            <div className={descriptionTextClass}>\n              {descriptionParagraphs}\n            </div>\n            <Button compact onClick={this.onToggleCollapseButtonClick}>{buttonTitle}</Button>\n          </div>\n        </div>\n        <Divider/>\n      </div>\n    );\n  }\n\n  onToggleCollapseButtonClick = () => {\n    this.setState((prevState) => {\n      return {\n        collapsed: !prevState.collapsed\n      };\n    });\n  };\n\n  getDescriptionParagraphs() {\n    const videoDescription = this.props.video.snippet ? this.props.video.snippet.description : null;\n    if (!videoDescription) {\n      return null;\n    }\n    return videoDescription.split('\\n').map((paragraph, index) => <p key={index}><Linkify>{paragraph}</Linkify></p>);\n  }\n\n  getSubscriberButtonText() {\n    const {channel} = this.props;\n    const parsedSubscriberCount = Number(channel.statistics.subscriberCount);\n    const subscriberCount = getShortNumberString(parsedSubscriberCount);\n    return `Subscribe ${subscriberCount}`;\n  }\n\n  getConfig() {\n    let descriptionTextClass = 'collapsed';\n    let buttonTitle = 'Show More';\n    if (!this.state.collapsed) {\n      descriptionTextClass = 'expanded';\n      buttonTitle = 'Show Less';\n    }\n    return {\n      descriptionTextClass,\n      buttonTitle\n    };\n  }\n}","import React from 'react';\nimport {Button, Icon} from \"semantic-ui-react\";\nimport './CommentsHeader.scss';\n\nexport function CommentsHeader(props) {\n  return (\n    <div className='comments-header'>\n      <h4>{props.amountComments} Comments</h4>\n      <Button basic compact icon labelPosition='left'>\n        <Icon name='align left' />\n        Sort by\n      </Button>\n    </div>\n  );\n}\n","import React from 'react';\nimport './Comment.scss';\nimport {Button, Image} from \"semantic-ui-react\";\nimport {Rating} from '../../../components/Rating/Rating';\n\nexport function Comment(props) {\n  if (!props.comment) {\n    return <div/>;\n  }\n  const topLevelComment = props.comment.snippet.topLevelComment;\n  const {authorProfileImageUrl, authorDisplayName, textOriginal} = topLevelComment.snippet;\n  const likeCount = topLevelComment.snippet.likeCount;\n\n  return (\n    <div className='comment'>\n      <Image className='user-image' src={authorProfileImageUrl} circular />\n      <div>\n        <div className='user-name'>{authorDisplayName}</div>\n        <span>{textOriginal}</span>\n        <div className='comment-actions'>\n          <Rating likeCount={likeCount}/> <Button size='mini' compact>REPLY</Button>\n        </div>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport './AddComment.scss';\nimport {Form, Image, TextArea} from \"semantic-ui-react\";\n\nexport function AddComment() {\n  return (\n    <div className='add-comment'>\n      <Image className='user-image' src='http://via.placeholder.com/48x48' circular/>\n      <Form>\n        <Form.TextArea control={TextArea} autoHeight placeholder='Add a public comment' />\n      </Form>\n    </div>\n  );\n}","import React from 'react';\nimport {CommentsHeader} from \"./CommentsHeader/CommentsHeader\";\nimport {Comment} from './Comment/Comment';\nimport {AddComment} from './AddComment/AddComment';\n\nexport class Comments extends React.Component {\n  render() {\n    if (!this.props.comments) {\n      return <div/>;\n    }\n\n    const comments = this.props.comments.map((comment) => {\n      return <Comment comment={comment} key={comment.id}/>\n    });\n\n    return(\n      <div>\n        <CommentsHeader amountComments={this.props.amountComments}/>\n        <AddComment key='add-comment'/>\n        {comments}\n      </div>\n    );\n  }\n}","import React from 'react';\nimport './NextUpVideo.scss';\nimport {Checkbox, Divider} from \"semantic-ui-react\";\nimport {VideoPreview} from '../../VideoPreview/VideoPreview';\n\nexport function NextUpVideo(props) {\n  return (\n    <React.Fragment>\n      <div className='next-up-container'>\n        <h4>Up next</h4>\n        <div className='up-next-toggle'>\n          <span>Autoplay</span>\n          <Checkbox toggle defaultChecked/>\n        </div>\n      </div>\n      <VideoPreview horizontal={true} video={props.video} pathname='/watch' search={`?v=${props.video.id}`}/>\n      <Divider/>\n    </React.Fragment>\n  );\n}","import React from 'react';\nimport {VideoPreview} from '../VideoPreview/VideoPreview';\nimport './RelatedVideos.scss';\nimport {NextUpVideo} from './NextUpVideo/NextUpVideo';\n\nexport function RelatedVideos(props) {\n  if (!props.videos || !props.videos.length) {\n    return <div className='related-videos'/>;\n  }\n\n  // safe because before we check if the array has at least one element\n  const nextUpVideo = props.videos[0];\n  const remainingVideos = props.videos.slice(1);\n\n  const relatedVideosPreviews = remainingVideos.map(relatedVideo => (\n      <VideoPreview video={relatedVideo}\n                    key={relatedVideo.id}\n                    pathname='/watch'\n                    search={`?v=${relatedVideo.id}`}\n                    horizontal={true}/>\n  ));\n\n  return (\n    <div className='related-videos'>\n      <NextUpVideo video={nextUpVideo}/>\n      {relatedVideosPreviews}\n    </div>\n  );\n}","import {VIDEO_DETAILS, WATCH_DETAILS} from '../actions/watch';\nimport {SUCCESS} from '../actions';\nimport {CHANNEL_LIST_RESPONSE} from '../api/youtube-api-response-types';\n\nconst initialState = {\n  byId: {}\n};\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case WATCH_DETAILS[SUCCESS]:\n      return reduceWatchDetails(action.response, state);\n    case VIDEO_DETAILS[SUCCESS]:\n      return reduceVideoDetails(action.response, state);\n    default:\n      return state;\n  }\n}\n\nfunction reduceWatchDetails(responses, prevState) {\n  const channelResponse = responses.find(response => response.result.kind === CHANNEL_LIST_RESPONSE);\n  let channels = {};\n  if (channelResponse && channelResponse.result.items) {\n    // we know that there will only be one item\n    // because we ask for a channel with a specific id\n    const channel = channelResponse.result.items[0];\n    channels[channel.id] = channel;\n  }\n  return {\n    ...prevState,\n    byId: {\n      ...prevState.byId,\n      ...channels\n    }\n  };\n}\n\nfunction reduceVideoDetails(responses, prevState) {\n  const channelResponse = responses.find(response => response.result.kind === CHANNEL_LIST_RESPONSE);\n  let channelEntry = {};\n  if (channelResponse && channelResponse.result.items) {\n    // we're explicitly asking for a channel with a particular id\n    // so the response set must either contain 0 items (if a channel with the specified id does not exist)\n    // or at most one item (i.e. the channel we've been asking for)\n    const channel = channelResponse.result.items[0];\n    channelEntry =  {\n      [channel.id]: channel,\n    }\n  }\n\n  return {\n    ...prevState,\n    byId: {\n      ...prevState.byId,\n      ...channelEntry,\n    }\n  };\n}\n\n/*\n*   Selectors\n* */\nexport const getChannel = (state, channelId) => {\n  if (!channelId) return null;\n  return state.channels.byId[channelId];\n};","import {createAction, createRequestTypes, FAILURE, REQUEST, SUCCESS} from './index';\n\nexport const COMMENT_THREAD = createRequestTypes('COMMENT_THREAD');\nexport const thread = {\n  request: (videoId, nextPageToken) => createAction(COMMENT_THREAD[REQUEST], {videoId, nextPageToken}),\n  success: (response, videoId) => createAction(COMMENT_THREAD[SUCCESS], {response, videoId}),\n  failure: (response) => createAction(COMMENT_THREAD[FAILURE], {response}),\n};","import {SUCCESS} from '../actions';\nimport {WATCH_DETAILS} from '../actions/watch';\nimport {COMMENT_THREAD_LIST_RESPONSE} from '../api/youtube-api-response-types';\nimport {createSelector} from 'reselect';\nimport {COMMENT_THREAD} from '../actions/comment';\nimport {getSearchParam} from '../../services/url';\n\nconst initialState = {\n  byVideo: {},\n  byId: {},\n};\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case COMMENT_THREAD[SUCCESS]:\n      return reduceCommentThread(action.response, action.videoId, state);\n    case WATCH_DETAILS[SUCCESS]:\n      return reduceWatchDetails(action.response, action.videoId, state);\n    default:\n      return state;\n  }\n}\n\nfunction reduceWatchDetails(responses, videoId, prevState) {\n  const commentThreadResponse = responses.find(res => res.result.kind === COMMENT_THREAD_LIST_RESPONSE);\n  return reduceCommentThread(commentThreadResponse.result, videoId, prevState);\n}\n\nfunction reduceCommentThread(response, videoId, prevState) {\n  if (!response) {\n    return prevState;\n  }\n  const newComments = response.items.reduce((acc, item) => {\n    acc[item.id] = item;\n    return acc;\n  }, {});\n\n  // if we have already fetched some comments for a particular video\n  // we just append the ids for the new comments\n  const prevCommentIds = prevState.byVideo[videoId] ? prevState.byVideo[videoId].ids : [];\n  const commentIds = [...prevCommentIds, ...Object.keys(newComments)];\n\n  const byVideoComment = {\n    nextPageToken: response.nextPageToken,\n    ids: commentIds,\n  };\n\n  return {\n    ...prevState,\n    byId: {\n      ...prevState.byId,\n      ...newComments,\n    },\n    byVideo: {\n      ...prevState.byVideo,\n      [videoId]: byVideoComment,\n    }\n  };\n}\n\n/*\n* Selectors\n */\nconst getCommentIdsForVideo = (state, videoId) => {\n  const comment = state.comments.byVideo[videoId];\n  if (comment) {\n    return comment.ids;\n  }\n  return [];\n};\nexport const getCommentsForVideo = createSelector(\n  getCommentIdsForVideo,\n  state => state.comments.byId,\n  (commentIds, allComments) => {\n    return commentIds.map(commentId => allComments[commentId]);\n  }\n);\n\nconst getComment = (state, location) => {\n  const videoId = getSearchParam(location, 'v');\n  return state.comments.byVideo[videoId];\n};\nexport const getCommentNextPageToken = createSelector(\n  getComment,\n  (comment) => {\n    return comment ? comment.nextPageToken : null;\n  }\n);","import React from 'react';\nimport {Video} from '../../../components/Video/Video';\nimport {VideoMetadata} from '../../../components/VideoMetadata/VideoMetadata';\nimport {VideoInfoBox} from '../../../components/VideoInfoBox/VideoInfoBox';\nimport {Comments} from '../../Comments/Comments';\nimport {RelatedVideos} from '../../../components/RelatedVideos/RelatedVideos';\nimport './WatchContent.scss';\nimport {getAmountComments, getRelatedVideos, getVideoById} from '../../../store/reducers/videos';\nimport {connect} from 'react-redux';\nimport {getChannel} from '../../../store/reducers/channels';\nimport {getCommentsForVideo} from '../../../store/reducers/comments';\nimport {InfiniteScroll} from '../../../components/InfiniteScroll/InfiniteScroll';\n\nclass WatchContent extends React.Component {\n  render() {\n    if (!this.props.videoId) {\n      return <div/>\n    }\n    return (\n      <InfiniteScroll bottomReachedCallback={this.props.bottomReachedCallback} showLoader={this.shouldShowLoader()}>\n        <div className='watch-grid'>\n          <Video className='video' id={this.props.videoId}/>\n          <VideoMetadata className='metadata' video={this.props.video}/>\n          <VideoInfoBox className='video-info-box' video={this.props.video} channel={this.props.channel}/>\n          <RelatedVideos className='related-videos' videos={this.props.relatedVideos}/>\n          <Comments className='comments' comments={this.props.comments}  amountComments={this.props.amountComments}/>\n        </div>\n      </InfiniteScroll>\n    );\n  }\n  shouldShowLoader() {\n    return !!this.props.nextPageToken;\n  }\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    relatedVideos: getRelatedVideos(state, props.videoId),\n    video: getVideoById(state, props.videoId),\n    channel: getChannel(state, props.channelId),\n    comments: getCommentsForVideo(state, props.videoId),\n    amountComments: getAmountComments(state, props.videoId)\n  }\n}\n\nexport default connect(mapStateToProps, null)(WatchContent);","import React from 'react';\nimport {bindActionCreators} from 'redux';\nimport * as watchActions from '../../store/actions/watch';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport WatchContent from './WatchContent/WatchContent';\nimport {getSearchParam} from '../../services/url';\nimport {getChannelId} from '../../store/reducers/videos';\nimport {getCommentNextPageToken} from '../../store/reducers/comments';\nimport * as commentActions from '../../store/actions/comment';\n\n\nexport class Watch extends React.Component {\n  render() {\n    const videoId = this.getVideoId();\n    return (\n      <WatchContent videoId={videoId} channelId={this.props.channelId} bottomReachedCallback={this.fetchMoreComments}\n                    nextPageToken={this.props.nextPageToken}/>\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.youtubeLibraryLoaded) {\n      this.fetchWatchContent();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\n      this.fetchWatchContent();\n    }\n  }\n\n  getVideoId() {\n    return getSearchParam(this.props.location, 'v');\n  }\n\n  fetchWatchContent() {\n    const videoId = this.getVideoId();\n    if (!videoId) {\n      this.props.history.push('/');\n    }\n    this.props.fetchWatchDetails(videoId, this.props.channelId);\n  }\n\n  fetchMoreComments = () => {\n    if (this.props.nextPageToken) {\n      this.props.fetchCommentThread(this.getVideoId(), this.props.nextPageToken);\n    }\n  };\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    channelId: getChannelId(state, props.location, 'v'),\n    nextPageToken: getCommentNextPageToken(state, props.location),\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const fetchWatchDetails = watchActions.details.request;\n  const fetchCommentThread = commentActions.thread.request;\n  return bindActionCreators({fetchWatchDetails, fetchCommentThread}, dispatch);\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Watch));\n","import React from 'react';\nimport {SideBar} from '../../containers/SideBar/SideBar';\nimport {InfiniteScroll} from '../InfiniteScroll/InfiniteScroll';\nimport './VideoList.scss';\nimport {VideoPreview} from '../VideoPreview/VideoPreview';\n\nexport class VideoList extends React.Component {\n  render() {\n    const videoPreviews = this.getVideoPreviews();\n    return (\n      <React.Fragment>\n        <SideBar/>\n        <div className='video-list'>\n          <InfiniteScroll bottomReachedCallback={this.props.bottomReachedCallback} showLoader={this.props.showLoader}>\n            {videoPreviews}\n          </InfiniteScroll>\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  getVideoPreviews() {\n    if(!this.props.videos || !this.props.videos.length) {\n      return null;\n    }\n    const firstVideo = this.props.videos[0];\n    if (!firstVideo.snippet.description) {return null}\n\n    return this.props.videos.map(video => (\n      <VideoPreview horizontal={true} expanded={true} video={video} key={video.id} pathname={'/watch'}\n                    search={'?v=' + video.id}/>)\n    );\n  }\n\n}","import React from 'react';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport * as videoActions from \"../../store/actions/video\";\nimport {\n  allMostPopularVideosLoaded,\n  getMostPopularVideos,\n  getMostPopularVideosNextPageToken\n} from '../../store/reducers/videos';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport {VideoList} from '../../components/VideoList/VideoList';\n\nclass Trending extends React.Component {\n  componentDidMount() {\n    this.fetchTrendingVideos();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.youtubeLibraryLoaded !== this.props.youtubeLibraryLoaded) {\n      this.fetchTrendingVideos();\n    }\n  }\n\n  render() {\n    const loaderActive = this.shouldShowLoader();\n\n    return (<VideoList\n      bottomReachedCallback={this.fetchMoreVideos}\n      showLoader={loaderActive}\n      videos={this.props.videos}/>);\n  }\n\n\n  fetchMoreVideos = () => {\n    const {nextPageToken} = this.props;\n    if (this.props.youtubeLibraryLoaded && nextPageToken) {\n      this.props.fetchMostPopularVideos(12, true, nextPageToken);\n    }\n  };\n\n  fetchTrendingVideos() {\n    if (this.props.youtubeLibraryLoaded) {\n      this.props.fetchMostPopularVideos(20, true);\n    }\n  }\n\n  shouldShowLoader() {\n    return !this.props.allMostPopularVideosLoaded;\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    videos: getMostPopularVideos(state),\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    allMostPopularVideosLoaded: allMostPopularVideosLoaded(state),\n    nextPageToken: getMostPopularVideosNextPageToken(state),\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const fetchMostPopularVideos = videoActions.mostPopular.request;\n  return bindActionCreators({fetchMostPopularVideos}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Trending);","import {createAction, createRequestTypes, FAILURE, REQUEST, SUCCESS} from './index';\n\nexport const SEARCH_FOR_VIDEOS = createRequestTypes('SEARCH_FOR_VIDEOS');\nexport const forVideos = {\n  request: (searchQuery, nextPageToken, amount) => createAction(SEARCH_FOR_VIDEOS[REQUEST], {searchQuery, nextPageToken, amount}),\n  success: (response, searchQuery) => createAction(SEARCH_FOR_VIDEOS[SUCCESS], {response, searchQuery}),\n  failure: (response, searchQuery) => createAction(SEARCH_FOR_VIDEOS[FAILURE],  {response, searchQuery}),\n};","import {SEARCH_FOR_VIDEOS} from '../actions/search';\nimport {REQUEST, SUCCESS} from '../actions';\n\nexport default function (state = {}, action) {\n  switch (action.type) {\n    case SEARCH_FOR_VIDEOS[SUCCESS]:\n      return reduceSearchForVideos(action.response, action.searchQuery, state);\n    case SEARCH_FOR_VIDEOS[REQUEST]:\n      // delete the previous search because otherwise our component flickers and shows the\n      // previous search results before it shows\n      return action.nextPageToken ? state : {};\n    default:\n      return state;\n  }\n}\n\nfunction reduceSearchForVideos(response, searchQuery, prevState) {\n  let searchResults = response.items.map(item => ({...item, id: item.id.videoId}));\n  if (prevState.query === searchQuery) {\n    const prevResults = prevState.results || [];\n    searchResults = prevResults.concat(searchResults);\n  }\n  return {\n    totalResults: response.pageInfo.totalResults,\n    nextPageToken: response.nextPageToken,\n    query: searchQuery,\n    results: searchResults\n  };\n}\n\n/*\n  Selectors\n */\nexport const getSearchResults = (state) => state.search.results;\nexport const getSearchNextPageToken = (state) => state.search.nextPageToken;","import React from 'react';\nimport './Search.scss';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport {getSearchNextPageToken, getSearchResults} from '../../store/reducers/search';\nimport * as searchActions from '../../store/actions/search';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {getSearchParam} from '../../services/url';\nimport {VideoList} from '../../components/VideoList/VideoList';\nimport {withRouter} from 'react-router-dom';\n\nclass Search extends React.Component {\n  render() {\n    return (<VideoList\n      bottomReachedCallback={this.bottomReachedCallback}\n      showLoader={true}\n      videos={this.props.searchResults}/>);\n  }\n\n  getSearchQuery() {\n    return getSearchParam(this.props.location, 'search_query');\n  }\n\n  componentDidMount() {\n    if (!this.getSearchQuery()) {\n      // redirect to home component if search query is not there\n      this.props.history.push('/');\n    }\n    this.searchForVideos();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.youtubeApiLoaded !== this.props.youtubeApiLoaded) {\n      this.searchForVideos();\n    }\n  }\n\n  searchForVideos() {\n    const searchQuery = this.getSearchQuery();\n    if (this.props.youtubeApiLoaded) {\n      this.props.searchForVideos(searchQuery);\n    }\n  }\n\n  bottomReachedCallback = () => {\n    if(this.props.nextPageToken) {\n      this.props.searchForVideos(this.getSearchQuery(), this.props.nextPageToken, 25);\n    }\n  };\n\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const searchForVideos = searchActions.forVideos.request;\n  return bindActionCreators({searchForVideos}, dispatch);\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    youtubeApiLoaded: getYoutubeLibraryLoaded(state),\n    searchResults: getSearchResults(state, props.location.search),\n    nextPageToken: getSearchNextPageToken(state, props.location.search),\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search));\n","import React, {Component} from 'react';\nimport Home from './containers/Home/Home';\nimport {AppLayout} from './components/AppLayout/AppLayout';\nimport {Route, Switch, withRouter} from 'react-router-dom';\nimport Watch from './containers/Watch/Watch';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {youtubeLibraryLoaded} from './store/actions/api';\nimport Trending from './containers/Trending/Trending';\nimport Search from './containers/Search/Search';\n\nconst API_KEY = 'AIzaSyBFTmwce1IplDO3zFslqpJaM5a5KLsIL70';\n\nclass App extends Component {\n  render() {\n    return (\n      <AppLayout>\n        <Switch>\n          <Route path=\"/feed/trending\" component={Trending}/>\n          <Route path=\"/results\" render={() => <Search key={this.props.location.key}/>}/>\n          <Route path=\"/watch\" render={() => <Watch key={this.props.location.key}/>}/>\n          <Route path=\"/\" component={Home}/>\n        </Switch>\n      </AppLayout>\n    );\n  }\n  componentDidMount() {\n    this.loadYoutubeApi();\n  }\n\n  loadYoutubeApi() {\n    const script = document.createElement(\"script\");\n    script.src = \"https://apis.google.com/js/client.js\";\n\n    script.onload = () => {\n      window.gapi.load('client', () => {\n        window.gapi.client.setApiKey(API_KEY);\n        window.gapi.client.load('youtube', 'v3', () => {\n          this.props.youtubeLibraryLoaded();\n        });\n      });\n    };\n\n    document.body.appendChild(script);\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({youtubeLibraryLoaded}, dispatch);\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(App));","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}","import apiReducer from './api';\nimport {combineReducers} from 'redux';\nimport videosReducer from './videos'\nimport channelsReducer from './channels';\nimport commentsReducer from './comments';\nimport searchReducer from './search';\n\nexport default combineReducers({\n  api: apiReducer,\n  videos: videosReducer,\n  channels: channelsReducer,\n  comments: commentsReducer,\n  search: searchReducer\n});","export function buildVideoCategoriesRequest() {\n    return buildApiRequest('GET',\n      '/youtube/v3/videoCategories',\n      {\n        'part': 'snippet',\n        'regionCode': 'US'\n      }, null);\n  }\n  \n  export function buildMostPopularVideosRequest(amount = 12, loadDescription = false, nextPageToken, videoCategoryId = null) {\n    let fields = 'nextPageToken,prevPageToken,items(contentDetails/duration,id,snippet(channelId,channelTitle,publishedAt,thumbnails/medium,title),statistics/viewCount),pageInfo(totalResults)';\n    if (loadDescription) {\n      fields += ',items/snippet/description';\n    }\n    return buildApiRequest('GET',\n      '/youtube/v3/videos',\n      {\n        part: 'snippet,statistics,contentDetails',\n        chart: 'mostPopular',\n        maxResults: amount,\n        regionCode: 'US',\n        pageToken: nextPageToken,\n        fields,\n        videoCategoryId,\n      }, null);\n  }\n  \n  export function buildVideoDetailRequest(videoId) {\n    return buildApiRequest('GET',\n      '/youtube/v3/videos',\n      {\n        part: 'snippet,statistics,contentDetails',\n        id: videoId,\n        fields: 'kind,items(contentDetails/duration,id,snippet(channelId,channelTitle,description,publishedAt,thumbnails/medium,title),statistics)'\n      }, null);\n  }\n  \n  export function buildChannelRequest(channelId) {\n    return buildApiRequest('GET',\n      '/youtube/v3/channels',\n      {\n        part: 'snippet,statistics',\n        id: channelId,\n        fields: 'kind,items(id,snippet(description,thumbnails/medium,title),statistics/subscriberCount)'\n      }, null);\n  }\n  \n  export function buildCommentThreadRequest(videoId, nextPageToken) {\n    return buildApiRequest('GET',\n      '/youtube/v3/commentThreads',\n      {\n        part: 'id,snippet',\n        pageToken: nextPageToken,\n        videoId,\n      }, null);\n  }\n  \n  export function buildSearchRequest(query, nextPageToken, amount = 12) {\n    return buildApiRequest('GET',\n      '/youtube/v3/search',\n      {\n        part: 'id,snippet',\n        q: query,\n        type: 'video',\n        pageToken: nextPageToken,\n        maxResults: amount,\n      }, null);\n  }\n  \n  export function buildRelatedVideosRequest(videoId, amountRelatedVideos = 12) {\n    return buildApiRequest('GET',\n      '/youtube/v3/search',\n      {\n        part: 'snippet',\n        type: 'video',\n        maxResults: amountRelatedVideos,\n        relatedToVideoId: videoId,\n      }, null);\n  }\n  \n  /*\n    Util - Youtube API boilerplate code\n   */\n  export function buildApiRequest(requestMethod, path, params, properties) {\n    params = removeEmptyParams(params);\n    let request;\n    if (properties) {\n      let resource = createResource(properties);\n      request = window.gapi.client.request({\n        'body': resource,\n        'method': requestMethod,\n        'path': path,\n        'params': params\n      });\n    } else {\n      request = window.gapi.client.request({\n        'method': requestMethod,\n        'path': path,\n        'params': params\n      });\n    }\n    return request;\n  }\n  \n  function removeEmptyParams(params) {\n    for (var p in params) {\n      if (!params[p] || params[p] === 'undefined') {\n        delete params[p];\n      }\n    }\n    return params;\n  }\n  \n  function createResource(properties) {\n    var resource = {};\n    var normalizedProps = properties;\n    for (var p in properties) {\n      var value = properties[p];\n      if (p && p.substr(-2, 2) === '[]') {\n        var adjustedName = p.replace('[]', '');\n        if (value) {\n          normalizedProps[adjustedName] = value.split(',');\n        }\n        delete normalizedProps[p];\n      }\n    }\n    for (var prop in normalizedProps) {\n      // Leave properties that don't have values out of inserted resource.\n      if (normalizedProps.hasOwnProperty(prop) && normalizedProps[prop]) {\n        var propArray = prop.split('.');\n        var ref = resource;\n        for (var pa = 0; pa < propArray.length; pa++) {\n          var key = propArray[pa];\n          if (pa === propArray.length - 1) {\n            ref[key] = normalizedProps[prop];\n          } else {\n            ref = ref[key] = ref[key] || {};\n          }\n        }\n      }\n    }\n    return resource;\n  }","import {fork, take, takeEvery, call, all, put} from 'redux-saga/effects';\nimport * as api from '../api/youtube-api';\nimport * as videoActions from '../actions/video';\nimport {REQUEST} from '../actions';\nimport {fetchEntity, ignoreErrors} from './index';\n\nexport const fetchVideoCategories = fetchEntity.bind(null, api.buildVideoCategoriesRequest, videoActions.categories);\n\n\nexport function* fetchMostPopularVideosByCategory(categories) {\n  const requests = categories.map(categoryId => {\n    const wrapper = ignoreErrors(api.buildMostPopularVideosRequest, 12, false, null, categoryId);\n    return call(wrapper);\n  });\n  try {\n    const response = yield all(requests);\n    yield put(videoActions.mostPopularByCategory.success(response, categories));\n  } catch (error) {\n    yield put(videoActions.mostPopularByCategory.failure(error));\n  }\n}\n\nexport function* fetchMostPopularVideos(amount, loadDescription, nextPageToken) {\n  const request = api.buildMostPopularVideosRequest.bind(null, amount, loadDescription, nextPageToken);\n  yield fetchEntity(request, videoActions.mostPopular);\n}\n\n\n/******************************************************************************/\n/******************************* WATCHERS *************************************/\n/******************************************************************************/\nexport function* watchMostPopularVideos() {\n  while (true) {\n    const {amount, loadDescription, nextPageToken} = yield take(videoActions.MOST_POPULAR[REQUEST]);\n    yield fork(fetchMostPopularVideos, amount, loadDescription, nextPageToken);\n  }\n}\n\nexport function* watchVideoCategories() {\n  yield takeEvery(videoActions.VIDEO_CATEGORIES[REQUEST], fetchVideoCategories);\n}\nexport function* watchMostPopularVideosByCategory() {\n  while(true) {\n    const {categories} = yield take(videoActions.MOST_POPULAR_BY_CATEGORY[REQUEST]);\n    yield fork(fetchMostPopularVideosByCategory, categories);\n  }\n}","import {fork, take, all, put, call} from 'redux-saga/effects';\nimport * as watchActions from '../actions/watch';\nimport {\n  buildVideoDetailRequest,\n  buildRelatedVideosRequest,\n  buildChannelRequest,\n  buildCommentThreadRequest\n} from '../api/youtube-api';\nimport {REQUEST} from '../actions';\nimport {SEARCH_LIST_RESPONSE, VIDEO_LIST_RESPONSE} from '../api/youtube-api-response-types';\n\nexport function* fetchWatchDetails(videoId, channelId) {\n  let requests = [\n    buildVideoDetailRequest.bind(null, videoId),\n    buildRelatedVideosRequest.bind(null, videoId),\n    buildCommentThreadRequest.bind(null, videoId)\n  ];\n\n  if (channelId) {\n    requests.push(buildChannelRequest.bind(null, channelId));\n  }\n\n  try {\n    const responses = yield all(requests.map(fn => call(fn)));\n    yield put(watchActions.details.success(responses, videoId));\n    yield call (fetchVideoDetails, responses, channelId === null);\n  } catch (error) {\n    yield put(watchActions.details.failure(error));\n  }\n}\n\nfunction* fetchVideoDetails(responses, shouldFetchChannelInfo) {\n  const searchListResponse = responses.find(response => response.result.kind === SEARCH_LIST_RESPONSE);\n  const relatedVideoIds =  searchListResponse.result.items.map(relatedVideo => relatedVideo.id.videoId);\n\n  const requests = relatedVideoIds.map(relatedVideoId => {\n    return buildVideoDetailRequest.bind(null, relatedVideoId);\n  });\n\n  if (shouldFetchChannelInfo) {\n    // we have to extract the video's channel id from the video details response\n    // so we can load additional channel information.\n    // this is only needed, when a user directly accesses .../watch?v=1234\n    // because then we only know the video id\n    const videoDetailResponse = responses.find(response => response.result.kind === VIDEO_LIST_RESPONSE);\n    const videos = videoDetailResponse.result.items;\n    if (videos && videos.length) {\n      requests.push(buildChannelRequest.bind(null, videos[0].snippet.channelId));\n    }\n  }\n\n  try {\n    const responses = yield all(requests.map(fn => call(fn)));\n    yield put(watchActions.videoDetails.success(responses));\n  } catch (error) {\n    yield put(watchActions.videoDetails.failure(error));\n  }\n}\n\n\n/******************************************************************************/\n/******************************* WATCHERS *************************************/\n/******************************************************************************/\nexport function* watchWatchDetails() {\n  while (true) {\n    const {videoId, channelId} = yield take(watchActions.WATCH_DETAILS[REQUEST]);\n    yield fork(fetchWatchDetails, videoId, channelId);\n  }\n}","import {fork, take} from 'redux-saga/effects';\nimport {REQUEST} from '../actions';\nimport * as commentActions from '../actions/comment'\nimport * as api from '../api/youtube-api';\nimport {fetchEntity} from './index';\n\nexport function* fetchCommentThread(videoId, nextPageToken) {\n  const request = api.buildCommentThreadRequest.bind(null, videoId, nextPageToken);\n  yield fetchEntity(request, commentActions.thread, videoId);\n}\n\n/******************************************************************************/\n/******************************* WATCHERS *************************************/\n/******************************************************************************/\nexport function* watchCommentThread() {\n  while(true) {\n    const {videoId, nextPageToken} = yield take(commentActions.COMMENT_THREAD[REQUEST]);\n    yield fork(fetchCommentThread, videoId, nextPageToken);\n  }\n}","import * as searchActions from '../actions/search';\nimport {REQUEST} from '../actions';\nimport {fork, take} from 'redux-saga/effects';\nimport * as api from '../api/youtube-api';\nimport {fetchEntity} from './index';\n\nexport function* searchForVideos(searchQuery, nextPageToken, amount) {\n  const request = api.buildSearchRequest.bind(null, searchQuery, nextPageToken, amount);\n  yield fetchEntity(request, searchActions.forVideos, searchQuery);\n}\n\n/******************************************************************************/\n/******************************* WATCHERS *************************************/\n/******************************************************************************/\nexport function* watchSearchForVideos() {\n  while (true) {\n    const {searchQuery, amount, nextPageToken} = yield take(searchActions.SEARCH_FOR_VIDEOS[REQUEST]);\n    yield fork(searchForVideos, searchQuery, nextPageToken, amount);\n  }\n}","import {all, call, put, fork} from 'redux-saga/effects';\nimport {watchMostPopularVideos, watchMostPopularVideosByCategory, watchVideoCategories} from './video';\nimport {watchWatchDetails} from './watch';\nimport {watchCommentThread} from './comment';\nimport {watchSearchForVideos} from './search';\nexport default function* () {\n  yield all([\n    fork(watchMostPopularVideos),\n    fork(watchVideoCategories),\n    fork(watchMostPopularVideosByCategory),\n    fork(watchWatchDetails),\n    fork(watchCommentThread),\n    fork(watchSearchForVideos)\n  ]);\n}\n\n/*\n* entity must have a success, request and failure method\n* request is a function that returns a promise when called\n* */\nexport function* fetchEntity(request, entity, ...args) {\n  try {\n    const response = yield call(request);\n    // we directly return the result object and throw away the headers and the status text here\n    // if status and headers are needed, then instead of returning response.result, we have to return just response.\n    yield put(entity.success(response.result, ...args));\n  } catch (error) {\n    yield put(entity.failure(error, ...args));\n  }\n}\n\nexport function ignoreErrors(fn, ...args) {\n  return () => {\n    const ignoreErrorCallback = (response) => response;\n    return fn(...args).then(ignoreErrorCallback, ignoreErrorCallback);\n  };\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport 'semantic-ui-css/semantic.min.css';\nimport { Provider } from 'react-redux';\nimport {BrowserRouter} from 'react-router-dom';\nimport {configureStore} from './store/configureStore';\n\nconst store = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </Provider>, document.getElementById('root'));\nregisterServiceWorker();\n","import {applyMiddleware, compose, createStore} from 'redux';\nimport reducer from './reducers';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from './sagas';\n\nexport function configureStore() {\n  const sagaMiddleware = createSagaMiddleware();\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const store = createStore(reducer, composeEnhancers(\n    applyMiddleware(sagaMiddleware)\n  ));\n  sagaMiddleware.run(rootSaga);\n  return store;\n}"],"sourceRoot":""}